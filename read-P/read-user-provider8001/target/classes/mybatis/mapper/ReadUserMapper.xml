<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.yong.springcloud.dao.ReadUserDao">

	<select id="findById" resultType="ReadUser" parameterType="Long">
		select 
			userid,
			username,
			userpwd,
			useremail,
			usersex,
			readcount,
			readpay,
			state,
			vipset,
			DATE_FORMAT(starttime,'%Y-%m-%d %H:%i:%s') as starttime,
			DATE_FORMAT(endtime,'%Y-%m-%d %H:%i:%s') as endtime 
		from readuser 
		where userid=#{userid};
	</select>
	<select id="findAll" resultType="ReadUser">
		select 
			userid,
			username,
			userpwd,
			useremail,
			usersex,
			readcount,
			readpay,
			state,
			vipset,
			DATE_FORMAT(starttime,'%Y-%m-%d %H:%i:%s') as starttime,
			DATE_FORMAT(endtime,'%Y-%m-%d %H:%i:%s') as endtime
		from readuser;
	</select>
	<insert id="addUser" parameterType="ReadUser">
		insert into readuser
		<trim prefix="(" suffix=")" suffixOverrides=",">
		<if test="username != null">
			username,
		</if>
		<if test="userpwd != null">
			userpwd,
		</if>
		<if test="useremail != null">
			useremail,
		</if>
		<if test="usersex != null">
			usersex,
		</if>
		<if test="readcount != null">
			readcount,
		</if>
		<if test="readpay != null">
			readpay,
		</if>
		<if test="state != null">
			state,
		</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
		<if test="username!= null" >
			#{username,jdbcType=VARCHAR},
		</if>
		<if test="userpwd!= null" >
			#{userpwd,jdbcType=VARCHAR},
		</if>
		<if test="useremail!= null" >
			#{useremail,jdbcType=VARCHAR},
		</if>
		<if test="usersex!= null" >
			#{usersex,jdbcType=VARCHAR},
		</if>
		<if test="readcount!= null" >
			#{readcount,jdbcType=BIGINT},
		</if>
		<if test="readpay!= null" >
			#{readpay,jdbcType=BIGINT},
		</if>
		<if test="state!= null" >
			#{state,jdbcType=VARCHAR},
		</if>
		</trim>
	</insert>
	<update id="upUser" parameterType="ReadUser">
		update readuser set 
			username=#{username},
			userpwd=#{userpwd},
			useremail=#{useremail},
			usersex=#{usersex},
			readcount=#{readcount},
			readpay=#{readpay},
			state=#{state},
			vipset=#{vipset},
			starttime=#{starttime},
			endtime=#{endtime}
		 where userid=#{userid};
	</update>
	<delete id="delUser" parameterType="Long">
		delete from readuser where userid=#{userid};
	</delete>
	
	<select id="findUser" resultType="ReadUser" parameterType="String">
		select 
			userid,
			username,
			userpwd,
			useremail,
			usersex,
			readcount,
			readpay,
			state,
			vipset,
			DATE_FORMAT(starttime,'%Y-%m-%d %H:%i:%s') as starttime,
			DATE_FORMAT(endtime,'%Y-%m-%d %H:%i:%s') as endtime 
		from readuser 
		where username=#{username};
	</select>

</mapper>
